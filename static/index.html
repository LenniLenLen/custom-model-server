<!-- ... Header, CSS bleibt gleich ... -->
<h2>All Models</h2>
<ul id="modelList"></ul>

<script>
const list = document.getElementById('modelList');

async function refreshList() {
  const res = await fetch('/models');
  const models = await res.json();
  list.innerHTML = '';

  models.forEach(model => {
    const li = document.createElement('li');

    const img = document.createElement('img');
    img.className = 'thumb';
    img.alt = model;
    img.src = `/preview/${encodeURIComponent(model)}`;
    img.onerror = () => { 
      img.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="72" height="72"><rect width="100%" height="100%" fill="#f5f5f5"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#999" font-size="10">Rendering...</text></svg>'; 
    };

    const meta = document.createElement('div');
    meta.className = 'meta';
    const title = document.createElement('b');
    title.textContent = model;
    meta.appendChild(title);

    const actions = document.createElement('div');
    actions.className = 'actions';

    const delBtn = document.createElement('button');
    delBtn.textContent = 'Delete';
    delBtn.className = 'danger';
    delBtn.onclick = async () => {
      if(!confirm(`Delete "${model}"?`)) return;
      const r = await fetch(`/models/${encodeURIComponent(model)}`, { method:'DELETE' });
      if(r.ok) refreshList(); else alert('Delete failed');
    };

    actions.appendChild(delBtn);
    li.appendChild(img);
    li.appendChild(meta);
    li.appendChild(actions);
    list.appendChild(li);
  });
}

// Upload form handling remains unchanged
document.getElementById('uploadForm').onsubmit = async e => {
  e.preventDefault();
  const form = e.target;
  const fd = new FormData(form);
  const resp = await fetch('/upload', { method:'POST', body: fd });
  if(!resp.ok) { const j = await resp.json().catch(()=>null); alert('Upload failed: ' + (j?.error || resp.statusText)); return; }
  form.reset();
  refreshList();
};

// initial load
refreshList();
</script>
